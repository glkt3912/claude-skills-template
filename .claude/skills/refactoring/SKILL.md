---
name: refactoring
description: コードをリファクタリングする。「リファクタ」「コード整理」「可読性向上」「技術的負債解消」などの依頼時に使用。
---

# 目的

外部から見た振る舞いを変えずに、コードの内部構造を改善する。

# 手順

1. **現状分析**
   - `references/code-smells.md` に基づきスメルを特定

2. **テスト確認**
   - 既存テストの有無を確認
   - 必要なら先にテストを追加

3. **リファクタリング実施**
   - `references/patterns.md` のパターンを適用
   - 小さなステップで変更

4. **検証**
   - 全テストがパスすることを確認

# 安全なリファクタリングのルール

| ルール | 説明 |
| ------ | ---- |
| テストファースト | リファクタ前にテストを確認 |
| 小さなステップ | 一度に1つの変更 |
| 頻繁にコミット | 動く状態を維持 |
| 振る舞い維持 | 外部仕様は変えない |

# 参照

- `references/code-smells.md` - コードスメル一覧
- `references/patterns.md` - リファクタリングパターン

# 制約

- 機能追加とリファクタリングは分けて行う
- パフォーマンスクリティカルな箇所は計測してから
- チームのコーディング規約に従う
